# 洞察先锋 (InsightPioneer) 使用指南

本文档将指导您如何使用洞察先锋网站监控系统来监控竞争对手网站并获取新页面通知。

## 目录

1. [系统概述](#1-系统概述)
2. [初始设置](#2-初始设置)
3. [添加监控网站](#3-添加监控网站)
4. [查看监控结果](#4-查看监控结果)
5. [配置飞书通知](#5-配置飞书通知)
6. [管理监控任务](#6-管理监控任务)
7. [常见问题解答](#7-常见问题解答)

## 1. 系统概述

洞察先锋是一个网站监控系统，可以帮助您：
- 追踪竞争对手网站的新页面
- 获取实时通知，第一时间发现新内容
- 有效管理和组织已发现的页面

系统支持三种监控模式：
- **Sitemap监控**：通过解析网站的Sitemap XML发现新页面
- **局部爬取**：针对特定页面（如分类页）进行监控
- **全站爬取**：对整个网站进行深度监控

## 2. 初始设置

在开始使用洞察先锋之前，您需要完成以下初始设置步骤：

### 2.1 访问系统

前端界面部署在Vercel上，通过以下网址访问：
```
https://insightpioneer.vercel.app
```

### 2.2 账户设置 (可选)

初期版本可能不包含用户认证系统，如已实现，请按以下步骤操作：
1. 点击"注册"按钮
2. 填写邮箱和密码
3. 点击"创建账户"
4. 登录系统

## 3. 添加监控网站

您可以通过以下步骤添加要监控的网站：

### 3.1 基本信息配置

1. 从侧边栏菜单点击"添加监控网站"
2. 填写以下基本信息：
   - **网站名称**：用于识别的备注名称（如"竞争对手A的游戏网站"）
   - **基础URL**：要监控的网站根URL（如`https://example.com`）
   - **监控频率**：选择监控频率（每小时、每6小时、每天等）

### 3.2 选择监控方式

根据您的需求选择以下监控方式之一：

#### 3.2.1 Sitemap监控配置

适用于拥有sitemap.xml的网站：
1. 选择"Sitemap监控"选项
2. 填写Sitemap URL（如`https://example.com/sitemap.xml`）
3. 选择是否为发现的URL获取标题（建议启用）

#### 3.2.2 局部爬取配置

适用于监控特定页面（如新闻列表、产品类目）：
1. 选择"局部爬取"选项
2. 填写入口页面URL（如`https://example.com/news`）
3. 填写用于提取链接的CSS选择器（如`.news-list .news-item a`）
4. (可选) 填写用于提取标题的CSS选择器（如`.news-list .news-item h2`）

#### 3.2.3 全站爬取配置

适用于全面监控整个网站：
1. 选择"全站爬取"选项
2. 设置爬取深度（建议3-5层）
3. 配置URL包含/排除规则（如包含`/products/`，排除`/archive/`）
4. 选择是否遵循robots.txt规则（建议启用）

### 3.3 高级配置 (可选)

根据需要配置以下高级选项：
1. **User-Agent**：自定义User-Agent字符串
2. **代理服务器**：配置代理服务器（可用于绕过限制）
3. **通知设置**：选择是否为此站点启用飞书通知

### 3.4 保存配置

配置完成后，点击"保存"按钮。系统将根据您设置的频率开始监控该网站。

## 4. 查看监控结果

### 4.1 仪表盘

仪表盘页面显示系统概览：
- 监控网站总数
- 今日新发现页面数
- 近期活动图表

### 4.2 查看新页面

1. 从侧边栏菜单点击"新发现页面"
2. 页面将显示所有新发现的URL列表，包括：
   - 页面URL
   - 所属监控网站
   - 页面标题（如果可用）
   - 发现时间
3. 使用筛选器按网站或日期范围筛选结果
4. 点击URL可直接打开对应页面

### 4.3 标记已处理

对于已查看或处理过的页面，您可以：
1. 勾选页面前的复选框
2. 点击"标记为已处理"按钮
3. 已处理的页面会被标记，可以通过筛选器隐藏

### 4.4 监控网站详情

查看特定网站的监控详情：
1. 从侧边栏菜单点击"监控网站"
2. 在网站列表中找到目标网站并点击
3. 详情页显示：
   - 该网站的所有配置信息
   - 该网站下发现的所有页面
   - (可选) 监控日志

## 5. 配置飞书通知

### 5.1 创建飞书机器人

1. 登录飞书管理后台
2. 进入"应用管理" -> "自建应用" -> "创建应用"
3. 填写应用信息并创建
4. 在应用功能页面启用"机器人"功能
5. 在"机器人"页面，选择"添加机器人"，选择"群机器人"
6. 获取Webhook URL

### 5.2 配置Webhook URL

1. 在系统设置中找到"通知设置"
2. 填入从飞书获取的Webhook URL
3. 保存设置

### 5.3 测试通知

1. 点击"测试通知"按钮
2. 如配置正确，将在指定的飞书群组收到测试消息

## 6. 管理监控任务

### 6.1 查看任务状态

任务状态可以在GitHub Actions页面查看：
1. 访问项目的GitHub仓库
2. 点击"Actions"标签
3. 查看任务执行历史、日志和状态

### 6.2 手动触发监控

如需立即执行监控（不等待计划时间）：
1. 在系统界面，找到目标网站
2. 点击"立即运行"按钮
3. 系统将触发GitHub Actions手动运行该监控任务
4. 监控完成后可查看结果

### 6.3 暂停/恢复监控

如需临时停止某网站的监控：
1. 在监控网站列表中找到目标网站
2. 切换"启用/禁用"开关至"禁用"状态
3. 保存更改

要恢复监控，只需将开关切换回"启用"状态。

### 6.4 修改监控配置

1. 在监控网站列表中找到目标网站
2. 点击"编辑"按钮
3. 修改需要更新的配置项
4. 点击"保存"按钮

### 6.5 删除监控配置

如果不再需要监控某网站：
1. 在监控网站列表中找到目标网站
2. 点击"删除"按钮
3. 确认删除操作

## 7. 常见问题解答

### 7.1 监控频率的选择

- **实时性要求高**：选择更频繁的监控（每小时或每6小时）
- **资源有限**：选择较低频率（每天或每周）
- **注意**：过于频繁的监控可能导致目标网站封禁IP

### 7.2 如何提高发现效率

- 使用局部爬取聚焦于高价值页面（如新品页、新闻页）
- 为Sitemap监控启用标题获取，以便更好地筛选结果
- 使用合适的CSS选择器确保提取正确的链接

### 7.3 常见错误及解决方法

| 错误描述 | 可能原因 | 解决方法 |
|---------|---------|---------|
| 无法连接目标网站 | 网络问题或目标网站限制 | 配置代理或减少监控频率 |
| 没有发现新页面 | 选择器配置错误或网站无更新 | 检查并修正CSS选择器 |
| 飞书通知未收到 | Webhook URL错误或权限问题 | 验证并更新Webhook配置 |
| 任务执行超时 | 监控网站过大或响应缓慢 | 减小爬取深度或使用局部爬取 |

### 7.4 性能与资源考虑

- GitHub Actions有执行时间限制，避免设置过大的爬取深度
- 监控大型网站时，建议使用更有针对性的局部爬取
- 数据量增长过快时，考虑定期清理已处理的历史记录 